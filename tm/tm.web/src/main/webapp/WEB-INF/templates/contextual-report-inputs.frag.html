<!--

        This file is part of the Squashtest platform.
        Copyright (C) 2010 - 2014 Henix, henix.fr

        See the NOTICE file distributed with this work for additional
        information regarding copyright ownership.

        This is free software: you can redistribute it and/or modify
        it under the terms of the GNU Lesser General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        this software is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU Lesser General Public License for more details.

        You should have received a copy of the GNU Lesser General Public License
        along with this software.  If not, see <http://www.gnu.org/licenses/>.

-->
<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-transitional-thymeleaf-spring3-3.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<title th:text="#{workspace.report.title}">Espace rapports</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" media="all" href="../../../../../../../tm/tm.web/styles/squash.core.css" />
<link rel="shortcut icon" type="image/x-icon" media="all"
  href="../../../../../../../tm/tm.web/src/main/webapp/images/favicon.ico" th:href="@{/images/favicon.ico}" />
<link rel="stylesheet" type="text/css" media="all" href="../../../../../../../tm/tm.web/styles/squash.wine.css" />

<script th:remove="all" type="text/javascript" src="../../scripts/lib/jquery/jquery-1.8.3.min.js"></script>
<script th:remove="all" type="text/javascript" src="../../js/thymol.js"></script>
<script type="text/javascript" th:inline="javascript">
    /* <![CDATA[ */
      var require = {
        rootUrl: /*[[ @{/scripts} ]]*/ "/squash/scripts"
      }
      var squashtm = {};
      squashtm.app = {
    	locale : /*[[#{squashtm.locale}]]*/ 'fr',
      menuBarConf: {
    }, 
        notificationConf: {
          infoTitle: /*[[ #{popup.title.info} ]]*/ 'Info', 
          errorTitle: /*[[ #{popup.title.error} ]]*/ 'Erreur'
        },
      reportWorkspaceConf: {
        expandSidebarLabel: /*[[ #{report.workspace.togglebutton.expand.label} ]]*/ '>>', 
        collapseSidebarLabel: /*[[ #{report.workspace.togglebutton.normal.label} ]]*/ '<<'
      }
      };
     /* ]]> */
    </script>
<script data-main="../../scripts/report-workspace.js" th:attr="data-main=@{/scripts/report-workspace.js}"
  src="../../scripts/require.js" th:src="@{/scripts/require-min.js}"></script>
</head>
<body>



  <!-- TEXT INPUT -->
  <!--  params = input -->
  <div th:fragment="text">
    <label for="rpt-text-crit" th:for="${input.name}" th:text="${input.label}">Text criteria</label>
    <input name="rpt-text-crit" th:id="${input.name}" th:name="${input.name}" type="text" value="" />
  </div>


  <!-- CHECKBOX -->
  <!--  params = input -->
  <div th:fragment="checkbox">
    <input name="rpt-chk-crit" th:id="${input.name}" th:name="input.name" type="checkbox" value="${input.value}"
      th:checked="${input.defaultSelected}" />
    <label for="rpt-chk-crit" th:for="${input.name}" th:text="${input.label}">Checkbox criteria</label>
  </div>


  <!-- DATE PICKER -->
  <!--  params = input -->
  <div th:fragment="datepicker">
    <label th:for="${input.name}" th:text="${input.label}">Date criteria</label>
    <span class="rpt-date-crit" th:id="${input.name}" th:name="${input.name}" th:text="#{squashtm.nodata}"
      data-locale="fr" th:attr="data-locale=#{squashtm.locale}">01-02-2012</span>
  </div>


  <!-- DROPDOWN LIST -->
  <!--  params = input -->
  <div th:fragment="dropdownlist">
    <label for="rpt-drop-crit" th:for="${input.name}" th:text="${input.label}">Dropdown criteria</label>
    <select name="rpt-drop-crit" th:name="${input.name}" size="1">
      <option th:each="opt : ${input.options}" th:name="${opt.name}" th:value="${opt.value}"
        th:selected="${opt.defaultSelected}" th:text="${opt.label}">Option</option>
    </select>
  </div>


  <!-- TREE PICKER  -->
  <!-- params = input , hasLabel -->
  <div th:fragment="treepicker">
    <div id="rpt-tree-crit-dialog" th:id="${input.name} + '-dialog'" title="Nodes"
      th:title="#{report.form.tree-picker.dialog.title}"
      class="rpt-tree-crit-dialog popup-dialog is-contextual not-displayed">
      <div id="rpt-tree-crit" th:id="${input.name}" class="rpt-tree-crit tree selection-tree"
        th:attr="data-node-type=${input.pickedNodeType}" data-node-type="CAMPAIGN">NODES</div>
    </div>
    <label th:if="${hasLabel}" for="rpt-tree-crit-open" th:for="${input.name} + '-open'" th:text="${input.label}">Nodes</label>
    <input id="rpt-tree-crit-open" th:id="${input.name} + '-open'" type="button" class="button rpt-tree-crit-open"
      th:value="#{report.form.tree-picker.button.label}" value="Pick nodes" data-id-opened="rpt-tree-crit-dialog"
      th:attr="data-id-opened=${input.name} + '-dialog'" />
  </div>


  <!--  PROJECT PICKER -->
  <!--  params = input , hasLabel -->
  <div th:fragment="projectpicker">
    <!-- project picker popup -->
    <div id="rpt-project-crit" th:id="${input.name}" title="Projects"
      th:title="#{report.form.project-picker.dialog.title}"
      class="rpt-projects-crit-container project-picker popup-dialog not-displayed" data-multi-select="true"
      th:attr="data-multi-select=${projectMultiselect}">
      <div id="dialog-settings-filter-maincontent">
        <div id="dialog-settings-filter-projectlist" class="project-filter-list dataTables_wrapper">
          <span class="filter-warning not-displayed" th:text="${projectMultiselect} ? #{message.projectPicker.warnFilterOn} : #{message.projectPicker.warnFilterOn.single}"></span>
          <table>
            <thead>
              <tr>
                <th width="25px" class="th-check ui-state-default"></th>
                <th class="th-name ui-state-default" th:text="#{label.Name}">Name</th>
                <th class="th-type ui-state-default" th:text="#{label.tag}">Tag</th>
              </tr>
            </thead>
            <tbody class="available-fields">
              <tr th:each="projectData : ${projectFilterModel.projectData}">
                <td class="td-check">
                  <input th:type="${projectMultiselect} ? 'checkbox' : 'radio'" type="checkbox" class="project-checkbox"
                    id="project-checkbox-1" th:id="'project-checkbox-'+${projectData[0]}" name="rpt-project-crit"
                    th:name="${input.name}" value="1" th:value="${projectData[0]}" data-previous-checked="false" />
                </td>
                <td class="project-name" th:text="${projectData[1]}">P1</td>
                <td class="project-label" th:text="${projectData[3]}">P1 label</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div th:if="${projectMultiselect}" id="dialog-settings-filter-controls" class="project-filter-controls">
          <ul>
            <li id="dialog-settings-filter-selectall" class="project-picker-selall cursor-pointer"
              th:text="#{dialog.settings.filter.controls.selectall}">Select all</li>
            <li id="dialog-settings-filter-deselectall" class="project-picker-deselall cursor-pointer"
              th:text="#{dialog.settings.filter.controls.deselectall}">Deselect all</li>
            <li id="dialog-settings-filter-invertselect" class="project-picker-invsel cursor-pointer"
              th:text="#{dialog.settings.filter.controls.invertselect}">Invert selection</li>
          </ul>
        </div>
        <div class="unsnap not-displayed"></div>
      </div>
      <div class="popup-dialog-buttonpane">
        <input type="button" th:value="#{label.Confirm}" />
        <input type="button" th:value="#{label.Cancel}" />
      </div>
    </div>
    <!-- /project picker popup  -->
    <label th:if="${hasLabel}" for="rpt-project-crit-open" th:for="${input.name} + '-open'" th:text="${input.label}">Projects</label>
    <span th:attr="data-multiple-value-text=#{label.multipleProjects}" data-multiple-value-text="Multiple projects"
      id="rpt-project-crit-result" th:id="'rpt-project-crit-result'+${input.name}" class="rpt-projects-crit-result"></span>
    <input id="rpt-project-crit-open" th:id="${input.name} + '-open'" type="button"
      class="button rpt-projects-crit-open" th:value="#{report.form.project-picker.button.label}" value="Pick projects"
      th:attr="data-id-opened=${input.name}, data-id-result='rpt-project-crit-result'+${input.name}" data-id-result="rpt-project-crit-result" data-id-opened="rpt-project-crit" />
  </div>



</body>
</html>
