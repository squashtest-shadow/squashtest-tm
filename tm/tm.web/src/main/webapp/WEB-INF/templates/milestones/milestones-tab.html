<!--

        This file is part of the Squashtest platform.
        Copyright (C) 2010 - 2015 Henix, henix.fr

        See the NOTICE file distributed with this work for additional
        information regarding copyright ownership.

        This is free software: you can redistribute it and/or modify
        it under the terms of the GNU Lesser General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        this software is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU Lesser General Public License for more details.

        You should have received a copy of the GNU Lesser General Public License
        along with this software.  If not, see <http://www.gnu.org/licenses/>.

-->


<div th:remove="tag">
  <!-- 
    This tag needs in the context an object MilestonePanelConfiguration named "conf"      
   -->
</div>

<div class="milestone-panel-master">
  <div class="toolbar" th:if="${conf.editable}" >
  
    <button class="sq-icon-btn btn-sm milestone-panel-bind-button" >
       <span class="ui-icon ui-icon-plus squared-icons">+</span>
    </button>
  
    <button class="sq-icon-btn btn-sm milestone-panel-unbind-button" >
       <span class="ui-icon ui-icon-minus squared-icons">-</span>
    </button>
    
  </div>

  <div class="table-tab-wrap">

    <table class="milestone-panel-table">
      <thead>
        <th data-def="select, sWidth=2.5em, map=entity-index">#</th>
        <th data-def="map=label, sortable" th:text="#{label.Label}">label</th>
        <th data-def="map=status, sortable" th:text="#{label.Status}">status</th>
        <th data-def="map=date, sortable" th:text="#{label.EndDate}">end date</th>
        <th data-def="map=description, sortable" th:text="#{label.Description}">description</th>
        <th data-def="map=empty-delete-holder, unbind-button=.unbind-milestone-dialog"></th>
      </thead>
      <tbody>
          <!-- initialized via javascript -->
      </tbody>

    </table>

  </div>

  <div class="bind-milestone-dialog popup-dialog not-displayed" th:title="#{title.bindMilestones}">

    <div>
      <table class="bind-milestone-dialog-table" data-def="filter">
        <thead>
          <th data-def="sClass=bind-milestone-dialog-check, map=empty-delete-holder"></th>
          <th data-def="map=label, sortable" th:text="#{label.Label}">label</th>
          <th data-def="map=status, sortable" th:text="#{label.Status}">status</th>
          <th data-def="map=date, sortable" th:text="#{label.EndDate}">end date</th>
          <th data-def="map=description, sortable" th:text="#{label.Description}">description</th>
        </thead>
        <tbody>

        </tbody>
      </table>

      <ul style="list-style-type: none;">
        <li class="clickable-item extra-small-margin-top"><span class="bind-milestone-dialog-selectall"    th:text="#{label.selectAllForSelection}">select all</span></li>
        <li class="clickable-item extra-small-margin-top"><span class="bind-milestone-dialog-selectnone"   th:text="#{label.selectNoneForSelection}">select none</span></li>
        <li class="clickable-item extra-small-margin-top"><span class="bind-milestone-dialog-invertselect" th:text="#{label.invertSelect}">invert selection</span></li>
      </ul>
       
    </div>

    <div class="popup-dialog-buttonpane">
      <input type="button" class="bind-milestone-dialog-confirm" data-def="evt=confirm, mainbtn" value="confirm" />
      <input type="button" class="bind-milestone-dialog-cancel" data-def="evt=cancel" value="cancel" />
    </div>

  </div>
  
  <div class="unbind-milestone-dialog popup-dialog not-displayed" th:title="#{title.unbindMilestones}">
    <div data-def="state=one-selected" class="centered">
        <span class="std-margin" th:text="#{title.unbindMilestones.oneselected}"></span>
    </div>
    <div data-def="state=more-selected" class="centered">
        <span class="std-margin" th:text="#{title.unbindMilestones.moreselected}"></span>
    </div>
    <div data-def="state=none-selected" class="centered">
        <span class="std-margin" th:text="#{title.unbindMilestones.noneselected}"></span>
    </div>
    
    <div class="popup-dialog-buttonpane">
      <input type="button" th:value="#{label.Ok}" data-def="state=one-selected more-selected, mainbtn=one-selected more-selected, evt=confirm"/>
      <input type="button" th:value="#{label.Cancel}" data-def="evt=cancel"/>
    </div>
  </div>
  
  <script th:inline="javascript">
  /*<![CDATA[*/
    	var conf = /*[[${conf}]]*/ {};
    	
    	require(["milestones/milestone-panel"], function(panel){
    		panel.init(conf);
    	});
    	
  /*]]>*/           
  </script>

</div>

